---
title: エクスペリエンスフラグメントコンポーネント
description: エクスペリエンスフラグメントコンポーネントを使用すると、コンテンツ作成者はエクスペリエンスフラグメントのバリエーションをページに追加できます。
role: Architect, Developer, Admin, User
exl-id: 103f729a-084d-4b6a-a239-d8ef8902eb95
source-git-commit: 3ebe1a42d265185b36424b01844f4a00f05d4724
workflow-type: ht
source-wordcount: '816'
ht-degree: 100%

---

# エクスペリエンスフラグメントコンポーネント {#experience-fragment-component}

コンテンツ作成者は、コアコンポーネントのエクスペリエンスフラグメントコンポーネントを使用して、ローカライズされたサイト構造をサポートしながら、エクスペリエンスフラグメントのバリエーションをページに配置できます。

## 使用方法 {#usage}

コアコンポーネントのエクスペリエンスフラグメントコンポーネントを使用すると、コンテンツ作成者が、既存のエクスペリエンスフラグメントバリエーションから選択してコンテンツページに配置できます。エクスペリエンスフラグメントコンポーネントでは、ローカライズされたサイト構造もサポートしています。

* このコンポーネントのプロパティは、[設定ダイアログ](#configure-dialog)で定義できます。
* コンポーネントをページに追加するときのデフォルト設定は、[デザインダイアログ](#design-dialog)で定義できます。

## ローカライズされたサイト構造のサポート {#localized-site-structure}

エクスペリエンスフラグメントコンポーネントは、ローカライズされたサイト構造に適応でき、ページのローカリゼーションに基づいて適切なエクスペリエンスフラグメントをレンダリングします。それには、エクスペリエンスフラグメントが次の条件を満たす必要があります。

* エクスペリエンスフラグメントコンポーネントがテンプレートに追加される。
* このテンプレートが、`/content/<site>` 配下のローカライズされた構造の一部となる新しいコンテンツページの作成に使用される。
* コンテンツページで参照されるエクスペリエンスフラグメントが、同じコンポーネント名を使用するなど、`/content/<site>` 配下のサイトと同じパターンに従っており、`/content/experience-fragments` 配下のローカライズされたエクスペリエンスフラグメント構造の一部となる。

この場合、現在のページと同じローカリゼーション（言語、ブループリント、ライブコピーのいずれか）を持つフラグメントがテンプレートの一部としてレンダリングされます。

この動作は、テンプレートに追加されたエクスペリエンスフラグメントコンポーネントに限られます。個々のコンテンツページに追加されたエクスペリエンスフラグメントコンポーネントは、コンポーネント内で設定されたとおりのエクスペリエンスフラグメントレンディションをレンダリングします。

* エクスペリエンスフラグメントコンポーネントのローカライゼーション機能の仕組みの例については、[以下のセクション](#example)を参照してください。
* コアコンポーネントのローカライゼーション機能の連携の例については、[コアコンポーネントのローカライゼーション機能ページ](/help/get-started/localization.md)を参照してください。

### 例 {#example}

コンテンツが次のような構造になっているとします。

```
/content
+-- experience-fragments
   \-- wknd
      +-- language-masters
      +-- us
         +-- en
            +-- footerTextXf
            \-- headerTextXf
         \-- es
            +-- footerTextXf
            \-- headerTextXf
      \-- ch
         +-- de
            +-- footerTextXf
            \-- headerTextXf
         +-- fr
            +-- footerTextXf
            \-- headerTextXf
         \-- it
            +-- footerTextXf
            \-- headerTextXf
+-- wknd
   +-- language-masters
   +-- us
      +-- en
      \-- es
   +-- ch
      +-- de
      +-- fr
      \-- it
+-- wknd-events
\-- wknd-shop
```

`/content/experience-fragments/wknd` 配下の構造が `/content/wknd` の構造を反映していることに注意してください。

このとき、エクスペリエンスフラグメントコンポーネント `/content/experience-fragments/wknd/us/en/footerTextXf` がテンプレートに配置される場合、ローカライズされたページをそのテンプレートに基づいて作成すると、ローカライズされたコンテンツページに対応するローカライズされたエクスペリエンスフラグメントが自動的にレンダリングされます。

したがって、同じテンプレートを使用する `/content/wknd/ch/de` 下のコンテンツページに移動すると、`/content/experience-fragments/wknd/us/en/footerTextXf` ではなく `/content/experience-fragments/wknd/ch/de/footerTextXf` がレンダリングされます。

### フォールバック {#fallback}

エクスペリエンスフラグメントコンポーネントでは、対応するローカライズされたコンポーネントを次の順序で探します。

1. まず、言語ルートを探します。
1. 言語ルートが見つからない場合は、ブループリントを探します。
1. ブループリントが見つからない場合は、ライブコピーを探します。
1. ライブコピーが見つからない場合は、コンポーネントで設定されているエクスペリエンスフラグメントがデフォルトで選択されます。

## バージョンと互換性 {#version-and-compatibility}

このドキュメントでは、エクスペリエンスフラグメントコンポーネントの現在のバージョン（2019 年 9 月にコアコンポーネントのリリース 2.6.0 で導入された v1）について説明します。

コンポーネントのすべてのサポート対象バージョン、コンポーネントの各バージョンと互換性のある AEM バージョン、以前のバージョンのドキュメントへのリンクを次の表に示します。

| コンポーネントのバージョン | AEM 6.4 | AEM 6.5 | AEM as a Cloud Service |
|--- |--- |---|---|
| v1 | 互換性あり | 互換性あり | 互換性あり |

コアコンポーネントのバージョンとリリースについて詳しくは、[コアコンポーネントのバージョン](/help/versions.md)を参照してください。

## コンポーネント出力のサンプル {#sample-component-output}

エクスペリエンスフラグメントコンポーネントを体験し、その設定オプションや HTML および JSON 出力の例を確認するには、[コンポーネントライブラリ](https://adobe.com/go/aem_cmp_library_xf)を参照してください。

## 技術的詳細 {#technical-details}

エクスペリエンスフラグメントコンポーネントに関する最新の技術ドキュメントについては、[GitHub](https://adobe.com/go/aem_cmp_tech_xf_v1_jp) を参照してください。

コアコンポーネントの開発について詳しくは、[コアコンポーネント開発者向けドキュメント](/help/developing/overview.md)を参照してください。

## 設定ダイアログ {#configure-dialog}

設定ダイアログでは、ページでレンダリングするエクスペリエンスフラグメントバリエーションをコンテンツ作成者が選択できます。

![エクスペリエンスフラグメントコンポーネントの編集ダイアログ](/help/assets/experience-fragment-edit.png)

「**選択ダイアログを開く**」ボタンを使用して、コンポーネントセレクターを開き、コンテンツページに追加するエクスペリエンスフラグメントコンポーネントバリエーションを選択します。

なお、エクスペリエンスフラグメントコンポーネントをテンプレートに追加する場合、エクスペリエンスフラグメントがローカライズされていれば、テンプレートは自動的にローカライズされます。したがって、ページ上にレンダリングされるものは、明示的に選択したコンポーネントと異なる場合があります。詳しくは、[上記の例](#example)を参照してください。

また、**ID** を定義することもできます。このオプションを使用すると、HTML 内および [データレイヤー](/help/developing/data-layer/overview.md)内のコンポーネントの一意の識別子を制御できます。

* 空白のままにした場合、一意の ID が自動的に生成されます。生成された ID は結果のページを調べることで確認できます。
* ID を指定した場合、作者はその ID が一意であることを確認する必要があります。
* ID を変更すると、CSS、JS、およびデータレイヤーのトラッキングに影響を与える可能性があります。

## デザインダイアログ {#design-dialog}

デザインダイアログでは、エクスペリエンスフラグメントコンポーネントの使用時にコンテンツ作成者に提供されるオプションと、エクスペリエンスフラグメントコンポーネントの配置時のデフォルト設定をテンプレート作成者が定義できます。

### 「スタイル」タブ {#styles-tab}

エクスペリエンスフラグメントコンポーネントは、AEM [スタイルシステム](/help/get-started/authoring.md#component-styling)をサポートしています。
