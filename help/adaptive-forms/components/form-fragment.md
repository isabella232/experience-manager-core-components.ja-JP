---
title: アダプティブフォームフラグメント
description: フォームフラグメントを使用して、フォームセグメントやフィールドのグループを作成し、Adaptive Forms全体で再利用することで、効率と再利用性を高めます。
role: Architect, Developer, Admin, User
hide: true
hidefromToC: true
source-git-commit: 9b97ea68d176d5194844093afdc41b82bdb45fee
workflow-type: tm+mt
source-wordcount: '1675'
ht-degree: 68%

---


# フォームフラグメントコンポーネント {#form-fragment-component-adaptive-forms-core-component}

アダプティブFormsでは、パネルやフィールドのグループなどのフォームセグメントを作成して、別のアダプティブFormsで再利用することができます。 これらの再利用可能でスタンドアロンのセグメントは、 [アダプティブフォームフラグメント](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/forms/adaptive-forms-authoring/authoring-adaptive-forms-core-components/create-an-adaptive-form-on-forms-cs/adaptive-form-fragments-core-components.html).

以下が可能です。 [ドキュメントにフラグメントを複数回追加する](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/forms/adaptive-forms-authoring/authoring-adaptive-forms-core-components/create-an-adaptive-form-on-forms-cs/adaptive-form-fragments-core-components.html#insert-a-fragment-in-an-adaptive-form) コンポーネントのデータ連結プロパティを使用して、異なるデータソースやスキーマに結び付けます。 例えば、同じアドレスフラグメントを永続アドレス、通信アドレス、請求先アドレスに使用し、それをデータソースやスキーマの様々なフィールドに接続することができます。

![例](/help/adaptive-forms/assets/using-multiple-fragment-af.gif)


また、 [再現性オプション](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/forms/adaptive-forms-authoring/authoring-adaptive-forms-core-components/create-an-adaptive-form-on-forms-cs/create-forms-repeatable-sections.html?lang=ja) フォームフラグメントコンポーネントとその子コンポーネントを複製するには、繰り返し回数の最小値と最大値を定義し、フォーム内の類似セクションの複製を容易にします。

>[!NOTE]
>
> 以下が可能です。 [アダプティブフォームフラグメントを作成する](https://experienceleague.adobe.com/docs/experience-manager-cloud-service/content/forms/adaptive-forms-authoring/authoring-adaptive-forms-core-components/create-an-adaptive-form-on-forms-cs/adaptive-form-fragments-core-components.html#create-a-fragment) パネルを最初から作成するか、パネルをフラグメントとして既存のアダプティブフォームに保存します。

## 使用方法 {#usage}

- **再利用性**：複数のアダプティブフォームでフォームフラグメントを再利用する機能は、フォームフラグメントを使用する主なメリットです。Forms フラグメントに加えた変更が、フラグメントを使用するすべてのインスタンスに反映されるので、デザインと機能の一貫性を維持するのに役立ちます。

- **一貫性のあるユーザーエクスペリエンス**：ヘッダーやフッターなど、共通の要素にフォームフラグメントを使用すると、一貫性のある統合的なユーザーエクスペリエンスを実現できます。

- **メンテナンスが容易**：フォームフラグメントに対する変更や変更は、そのフラグメントが使用されるすべてのインスタンスに反映されます。 メンテナンスが簡単になり、エラーの発生確率が低下します。

- **効率性**：デザイナーや開発者は、フォームフラグメントを構築してテストするのは 1 回だけなので、時間を節約できます。 その後、冗長な作業を必要とせずに、フォームフラグメントを簡単に複数のアダプティブFormsに組み込むことができます。

## バージョンと互換性 {#version-and-compatibility}

アダプティブFormsフラグメントコアコンポーネントは、Cloud Service用コアコンポーネント 2.0.50 の一部としてリリースされ、AEM 6.5.16.0 Forms以降用コアコンポーネント 1.1.26 でリリースされました。 次の表に、サポートされているすべてのバージョン、AEM の互換性、対応するドキュメントへのリンクを示します。

| コンポーネントのバージョン | AEM as a Cloud Service | AEM 6.5.16.0 Forms 以降 |
|---|---|---|
| v1 | <br>[リリース 2.0.50](/help/adaptive-forms/version.md) 以降と互換性あり | <br>[リリース 1.1.26](/help/adaptive-forms/version.md) 以降、2.0.0 未満と互換性があります。 |

コアコンポーネントのバージョンとリリースについて詳しくは、[コアコンポーネントのバージョン](/help/adaptive-forms/version.md)ドキュメントをご覧ください。

## 技術的詳細 {#technical-details}

アダプティブFormsフラグメントコアコンポーネントの最新情報については、 [GitHub](https://github.com/adobe/aem-core-forms-components/tree/master/ui.af.apps/src/main/content/jcr_root/apps/core/fd/components/form/fragment). コアコンポーネントの開発について詳しくは、 [コアコンポーネント開発者向けのドキュメント](/help/developing/overview.md)をご覧ください。

## 設定ダイアログ {#configure-dialog}

設定ダイアログを使用すると、訪問者に対してフラグメントエクスペリエンスを簡単にカスタマイズできます。 また、簡単にフラグメントプロパティを定義して、シームレスなユーザーエクスペリエンスを実現することもできます。

### 「基本」タブ {#basic-tab}

![「基本」タブ](/help/adaptive-forms/assets/fragment-basictab.png)

- **名前** - フォームコンポーネントは、フォーム内とルールエディター内の両方で一意の名前で簡単に識別できますが、名前にスペースや特殊文字を含めることはできません。

- **タイトル** - タイトルを使用すると、フォーム内のコンポーネントを簡単に識別できます。デフォルトでは、コンポーネントの上にタイトルが表示されます。 タイトルを追加しない場合、コンポーネントの名前がタイトルテキストの代わりに表示されます。

- **タイトルを非表示** - コンポーネントのタイトルを非表示にするには、このオプションを選択します。

- **フォームの送信時に子コンポーネントのデータをグループ化（オブジェクトにデータを含める）** - このオプションを選択すると、子コンポーネントのデータが親コンポーネントの JSON オブジェクト内にネストされます。ただし、このオプションを選択しないと、送信した JSON データは、親コンポーネントのオブジェクトを持たないフラットな構造になります。例：

   - このオプションを選択すると、子コンポーネント（番地、市区町村、郵便番号など）のデータが、JSON オブジェクトとして親コンポーネント（住所）内にネストされます。これにより、階層構造が作成され、データは親コンポーネントの下に整理されます。

     送信したデータの構造：

     ```JSON
     { "Address":
     
     { "Street": "123 Main Street", "City": "New York", "Zip Code": "12345" }
     
     }
     ```

   - このオプションを選択しないと、送信した JSON データは、親コンポーネント（住所）のオブジェクトを持たないフラットな構造になります。すべてのデータは同じレベルにあり、階層構造はありません。


     送信したデータの構造：

     ```JSON
        { "Street": "123 Main Street", "City": "New York", "Zip Code": "12345" }
     ```

- **フラグメント参照**  — フラグメント参照は、外部データソースに保存され、フォーム内で使用されるフォームフラグメントへの参照です。 フラグメント参照を使用すると、フォームフラグメントをフォームに動的に連結できます。

- **バインド参照** - バインド参照は、外部データソースに保存され、フォーム内で使用されるデータ要素への参照です。 バインド参照を使用すると、データをフォームフィールドに動的にバインドして、フォームにデータソースの最新のデータを表示できます。 例えば、フォームに入力された顧客 ID に基づいて、顧客の名前と住所をフォームに表示できます。 さらに、フォームに入力されたデータでデータソースを更新することもできます。 このように AEM Formsで外部データソースとやり取りするフォームを作成して、データの収集と管理のためのシームレスなユーザーエクスペリエンスを提供できます。

- **コンポーネントを非表示** - フォームでコンポーネントを非表示にするには、このオプションを選択します。 このコンポーネントは、他の目的（ルールエディターでの計算に使用するなど）にも利用できます。 これは、ユーザーが表示する必要のない情報や直接変更した情報を保存する必要がある場合に役立ちます。
- **コンポーネントの無効化** - コンポーネントを無効にする場合は、このオプションを選択します。 エンドユーザーは、無効になっているコンポーネントをアクティブにしたり、編集したりすることはできません。 ユーザーはフィールドの値を表示できますが、変更することはできません。 このコンポーネントは、他の目的（ルールエディターでの計算に使用するなど）にも利用できます。
- **読み取り専用** - コンポーネントを編集不可にするには、このオプションを選択します。 ユーザーはフィールドの値を表示できますが、変更することはできません。 このコンポーネントは、他の目的（ルールエディターでの計算に使用するなど）にも利用できます。

### 「フラグメントを繰り返し」タブ {#repeat-tab}

![「フラグメントを繰り返し」タブ](/help/adaptive-forms/assets/fragment-repeattab.png)

- **フラグメントを繰り返し可能にする**：ユーザーが繰り返し機能を有効または無効にできる切り替え機能。
- **繰り返しの最小値**：フラグメントコンポーネントを繰り返し可能な最小回数を設定します。 値が 0 の場合、フラグメントコンポーネントは繰り返されません。デフォルト値は 0 です。
- **最大繰り返し**：フラグメントコンポーネントを繰り返し可能な最大回数を設定します。 デフォルトでは、この値は無制限です。

### 「ヘルプコンテンツ」タブ {#help-content}

![「ヘルプコンテンツ」タブ](/help/adaptive-forms/assets/fragment-helptab.png)

- **短い説明** - 短い説明は、特定のフォームフィールドの目的に関する追加の情報や説明を提供する簡単な説明文です。これにより、ユーザーは、フィールドに入力するデータの種類を理解しやすくなります。また、入力された情報が有効で目的の条件を満たしていることを確認できるように、ガイドラインや例を提供できます。デフォルトでは、短い説明は非表示になっています。 「**短い説明を常に表示**」オプションを有効にすると、コンポーネントの下に説明が表示されます。

- **短い説明を常に表示** - このオプションを有効にすると、コンポーネントの下に短い説明が表示されます。

- **ヘルプテキスト** - ヘルプテキストとは、フォームフィールドの正しい入力を支援するためにユーザーに提供される追加の情報やガイダンスを指します。コンポーネントの横に配置されているヘルプアイコン（i）をクリックすると表示されます。 ユーザーがフィールドの要件や制約を理解できるように設計されているヘルプテキストは、フォームフィールドのラベルやプレースホルダーテキストよりも詳細な情報を提供できます。また、フォームへの入力をより簡単かつ正確にするための提案や例を提供することも可能です。

### アクセシビリティ {#accessibility}

![「アクセシビリティ」タブ](/help/adaptive-forms/assets/fragment-accessibilitytab.png)

- **スクリーンリーダー用テキスト** - スクリーンリーダー用テキストとは、視覚に障害のあるユーザーが使用する、支援テクノロジー（スクリーンリーダーなど）によって読み上げられる追加のテキストを指します。このテキストでは、フォームフィールドの目的に関するオーディオの説明が提供され、フィールドのタイトル、説明、名前および関連するメッセージ（カスタムテキスト）に関する情報を含めることができます。スクリーンリーダー用のテキストを使用すると、視覚に障害のあるユーザーを含むすべてのユーザーがフォームに確実にアクセスして、フォームフィールドとその要件を完全に理解できるようになります。

## デザインダイアログ {#design-dialog}

デザインダイアログは、フォームフラグメントコンポーネントの CSS スタイルを定義および管理するために使用されます。

### 「スタイル」タブ {#styles-tab}

アダプティブフォームフラグメントコアコンポーネントは、AEM [スタイルシステム](/help/get-started/authoring.md#component-styling).

![デザインダイアログ](/help/adaptive-forms/assets/checkbox-style.png)

- **デフォルトの CSS クラス**：アダプティブフォームフラグメントコアコンポーネントのデフォルトの CSS クラスを指定できます。

- **許可されたスタイル**：スタイルを表す名前と CSS クラスを指定してスタイルを定義します。 例えば、「bold text」という名前のスタイルを作成し、CSS クラス「font-weight: bold」を指定できます。アダプティブフォームエディターでアダプティブフォームにこれらのスタイルを使用または適用できます。スタイルを適用するには、アダプティブフォームエディターでスタイルを適用するコンポーネントを選択し、「プロパティ」ダイアログに移動して「**スタイル**」ドロップダウンリストから希望のスタイルを選択します。スタイルを更新または変更する必要がある場合は、デザインダイアログに戻り、「スタイル」タブでスタイルを更新して変更を保存します。

### カスタムプロパティ

![カスタムプロパティダイアログ](/help/adaptive-forms/assets/checkbox-customproperties.png)

カスタムプロパティを使用すると、フォームテンプレートを使用して、カスタム属性（キーと値のペア）をアダプティブフォームのコアコンポーネントに関連付けることができます。 カスタムプロパティは、コンポーネントのヘッドレスレンディションのプロパティセクションに反映されます。これにより、カスタム属性値に基づいて適応する動的なフォーム動作を作成できます。例えば、開発者は、モバイル、デスクトップ、web プラットフォーム上にヘッドレスフォームコンポーネントの様々なレンディションをデザインできるので、幅広いデバイスでのユーザーエクスペリエンスが大幅に向上します。

- **グループ名**：カスタムプロパティグループを識別する名前を指定できます。複数のカスタムプロパティグループを追加、削除または並べ替えることができます。カスタムプロパティグループを追加すると、次のオプションが表示されます。

   - **キーと値のペア**：各カスタムプロパティグループの「**追加**」ボタンをクリックすると、複数のカスタムプロパティ名とカスタムプロパティ値を追加できます。

   - **削除**：タップまたはクリックすると、カスタムプロパティ名とカスタムプロパティ値を削除できます。

   - **並べ替え**：タップまたはクリックしてドラッグすると、カスタムプロパティ名とカスタムプロパティ値を並べ替えることができます。

## 関連記事 {#related-articles}

{{more-like-this}}

## 関連トピック {#see-also}

{{see-also}}






